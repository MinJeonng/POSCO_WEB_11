<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            //promise
            function promise1(flag) {
                return new Promise((resolve, reject) => {
                    if (flag) {
                        //  t/f를 나타낼때 쓰는게 flag
                        resolve('promise 상태는 fulfilled! then으로 연결됩니다. \n 이때의 flag는 true입니다.');
                    } else {
                        reject(`promise 상태는 rejected! catch로 연결됩니다.\n 이때의 flag는 false입니다.`);
                    }
                });
            }
            promise1(false) //true로 하면 resolve, false면 reject
                .then(function (result) {
                    console.log(result); //위의 메시지를 그대로 가져오고 싶기 때문에 함수에 매개변수를 만들어주고 받으면 됌.
                })
                .catch((error) => {
                    console.log(error);
                });

            // <br />;

            function goMart() {
                console.log('마트에 가서 어떤 음료를 살지 고민중');
            }

            function pickFood() {
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        console.log('고민끝');
                        product = '코카콜라';
                        price = 2000;
                        resolve(); //성공할때 반환되어야하는게 setTimeout 함수니까.
                    }, 2000);
                });
            }
            function pay() {
                console.log(`상품명 : ${product}, 가격 : ${price}`);
            }
            goMart();
            pickFood().then(pay); //성공할때 then이고, 이걸 받아와야하니까.

            /*
    
            async function exec() {
                goMart();
                await pickFood();
                pay();
            }
            let product;
            let price;
            exec();
            */
        </script>
    </body>
</html>
